<div class="relative w-full overflow-hidden">
  <div id="carousel">
    {{ range $i, $slide := .content.slides }}
      <div class="carousel-item {{ if eq $i 0 }}block{{ else }}hidden{{ end }} w-full h-screen">
        <img src="{{ (printf "media/%s" $slide.image) | relURL }}" class="w-full h-full object-cover opacity-80" alt="{{ $slide.title }}">
        <div class="absolute inset-0 flex flex-col items-center justify-center text-center text-white bg-black bg-opacity-40">
          <h1 class="text-5xl font-bold mb-4">{{ $slide.title }}</h1>
          <p class="text-xl max-w-2xl">{{ $slide.text | markdownify }}</p>
        </div>
      </div>
    {{ end }}
  </div>

  <!-- 좌우 버튼 -->
  <button id="prev" class="absolute top-1/2 left-5 transform -translate-y-1/2 bg-gray-900 bg-opacity-50 text-white px-3 py-2 rounded-full">❮</button>
  <button id="next" class="absolute top-1/2 right-5 transform -translate-y-1/2 bg-gray-900 bg-opacity-50 text-white px-3 py-2 rounded-full">❯</button>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const slides = document.querySelectorAll('.carousel-item');
  const nextBtn = document.getElementById('next');
  const prevBtn = document.getElementById('prev');
  let index = 0;

  function showSlide(i) {
    slides.forEach((s, idx) => {
      s.classList.toggle('hidden', idx !== i);
      s.classList.toggle('block', idx === i);
    });
  }

  nextBtn.addEventListener('click', () => { index = (index + 1) % slides.length; showSlide(index); });
  prevBtn.addEventListener('click', () => { index = (index - 1 + slides.length) % slides.length; showSlide(index); });

  setInterval(() => { index = (index + 1) % slides.length; showSlide(index); }, 5000);
});
</script>
