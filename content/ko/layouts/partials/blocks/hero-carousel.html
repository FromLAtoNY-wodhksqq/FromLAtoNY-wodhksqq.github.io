<section id="hero-carousel" class="relative overflow-hidden">
  <div class="relative w-full h-screen">
    <!-- 슬라이드 컨테이너 -->
    <div class="slides absolute inset-0 transition-transform duration-700 ease-in-out flex">
      {{ range .content.slides }}
      <div class="slide flex-shrink-0 w-full h-screen relative">
        <img src="{{ (printf "media/%s" .image) | relURL }}" class="w-full h-full object-cover" />
        <div class="absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-center text-white">
          <h1 class="text-5xl font-bold mb-4">{{ .title }}</h1>
          <p class="text-xl max-w-2xl">{{ .text | markdownify }}</p>
        </div>
      </div>
      {{ end }}
    </div>

    <!-- 좌우 버튼 -->
    <button id="prevBtn" class="absolute left-6 top-1/2 -translate-y-1/2 bg-black/40 text-white px-4 py-2 rounded-full hover:bg-black/70 transition">
      &#10094;
    </button>
    <button id="nextBtn" class="absolute right-6 top-1/2 -translate-y-1/2 bg-black/40 text-white px-4 py-2 rounded-full hover:bg-black/70 transition">
      &#10095;
    </button>

    <!-- 점(dot) 네비게이션 -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex space-x-3">
      {{ range $index, $_ := .content.slides }}
      <div class="dot w-3 h-3 rounded-full bg-gray-400 cursor-pointer" data-index="{{ $index }}"></div>
      {{ end }}
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const slides = document.querySelectorAll("#hero-carousel .slide");
      const dots = document.querySelectorAll("#hero-carousel .dot");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const slideContainer = document.querySelector("#hero-carousel .slides");
      let current = 0;
      let autoPlay;

      function showSlide(index) {
        if (index < 0) index = slides.length - 1;
        if (index >= slides.length) index = 0;
        slideContainer.style.transform = `translateX(-${index * 100}%)`;
        dots.forEach((d, i) => d.classList.toggle("bg-white", i === index));
        current = index;
      }

      function nextSlide() {
        showSlide(current + 1);
      }

      function prevSlide() {
        showSlide(current - 1);
      }

      function startAutoPlay() {
        autoPlay = setInterval(nextSlide, 4000);
      }

      function stopAutoPlay() {
        clearInterval(autoPlay);
      }

      // 버튼 이벤트
      nextBtn.addEventListener("click", () => { stopAutoPlay(); nextSlide(); startAutoPlay(); });
      prevBtn.addEventListener("click", () => { stopAutoPlay(); prevSlide(); startAutoPlay(); });

      // 도트 클릭 이벤트
      dots.forEach(dot => {
        dot.addEventListener("click", () => {
          stopAutoPlay();
          showSlide(parseInt(dot.dataset.index));
          startAutoPlay();
        });
      });

      // 초기화
      showSlide(0);
      startAutoPlay();
    });
  </script>
</section>
